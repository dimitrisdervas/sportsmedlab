<!-- Get src param from shortcode -->
{{ $src := $.Get "src"}}

<!-- Get alt param from shortcode -->
{{ $alt := $.Get "alt"}}

{{ $caption := $.Get "caption"}}

<!-- Get image -->
{{$img := resources.Get $src}}

{{ if $img }}
<!-- Resize image as a test it's working -->
{{- $desktop := $img.Resize "700x"}}
{{- $mobile := $img.Resize "400x"}}

<picture>
    <source media="(max-width:401px)" srcset="{{ $mobile.Permalink }}">
    <img src="{{ $desktop.Permalink }}" alt="{{ $alt }}" style="width:auto;">
</picture>
{{ else }}
<!-- Fallback for static images -->
<img src="{{ $src | relURL }}" alt="{{ $alt }}" style="width:auto;">
{{ end }}

<em class="prose-sm ">{{ $caption }}</em>


{{/* to check https://discourse.gohugo.io/t/how-to-resize-image-in-custom-figure-shortcode/14022/6  */}}
